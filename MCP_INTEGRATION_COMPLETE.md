# MCP Integration Complete - Toshl Finance

## –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MCP (Model Context Protocol) —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Toshl Finance API —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

## –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### 1. üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω Nx –ø—Ä–æ–µ–∫—Ç `@tasks/mcp-servers` 
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω `toshl-mcp-server` –∏–∑ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã build/serve —Ç–∞—Ä–≥–µ—Ç—ã –¥–ª—è Nx workspace
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (@modelcontextprotocol/sdk, axios, winston, node-cache)

### 2. üîß TaskProcessor —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω `toshl-mcp.processor.ts` —Å —Ç—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏:
  - `expenses-summary` - —Å–≤–æ–¥–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥
  - `recent-transactions` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏  
  - `budget-status` - —Å—Ç–∞—Ç—É—Å –±—é–¥–∂–µ—Ç–∞
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω `ExeTypes` –Ω–æ–≤—ã–º —Ç–∏–ø–æ–º `toshl_mcp_finance`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ –≤ `TaskProcessors`

### 3. üåê HTTP API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ axios –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ MCP —Å–µ—Ä–≤–µ—Ä—É
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4. üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `.env.example` —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ç–æ–∫–µ–Ω–∞ Toshl API
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–¥–∞—á –≤ `examples/toshl-tasks.js`

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# 1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ .env.example –≤ .env
cp .env.example .env

# 2. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω Toshl API
TOSHL_API_TOKEN=your_actual_token_here
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ UI:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –ù–∞–∂–º–∏—Ç–µ "Add Task"
3. –í—ã–±–µ—Ä–∏—Ç–µ `toshl_mcp_finance` –∫–∞–∫ Execution Type
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ payload:

**–°–≤–æ–¥–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤:**
```json
{
  "operation": "expenses-summary",
  "params": {
    "from": "2024-01-01",
    "to": "2024-01-31"
  }
}
```

**–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:**
```json
{
  "operation": "recent-transactions", 
  "params": {
    "limit": 10
  }
}
```

**–°—Ç–∞—Ç—É—Å –±—é–¥–∂–µ—Ç–∞:**
```json
{
  "operation": "budget-status",
  "params": {}
}
```

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
# –°–±–æ—Ä–∫–∞ MCP —Å–µ—Ä–≤–µ—Ä–∞
nx build mcp-servers

# –ó–∞–ø—É—Å–∫ MCP —Å–µ—Ä–≤–µ—Ä–∞ –≤ dev —Ä–µ–∂–∏–º–µ  
nx serve mcp-servers

# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ TaskQueue
nx serve taskqueue

# –ó–∞–ø—É—Å–∫ frontend
nx serve frontend
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è:

```
TaskQueue UI ‚Üí Task Creation ‚Üí TaskProcessor (toshl-mcp.processor.ts) 
    ‚Üì
HTTP Request to MCP Server (localhost:3001)
    ‚Üì  
MCP Server ‚Üí Toshl Finance API ‚Üí Financial Data
    ‚Üì
Response Processing ‚Üí Task Result ‚Üí UI Display
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

1. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ `toshl-mcp.processor.ts`
2. **–î—Ä—É–≥–∏–µ MCP —Å–µ—Ä–≤–µ—Ä—ã:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤–Ω–µ—à–Ω–∏—Ö API —á–µ—Ä–µ–∑ MCP
3. **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ/–µ–∂–µ–º–µ—Å—è—á–Ω—ã–µ –æ—Ç—á—ë—Ç—ã
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram/Pushover –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

- ‚úÖ –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ —É—Å–ø–µ—à–Ω–∞—è
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nx –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è  
- ‚úÖ TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TaskQueue —Å–∏—Å—Ç–µ–º–æ–π
- üîÑ –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º Toshl API —Ç–æ–∫–µ–Ω–æ–º

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω Toshl API –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ README
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env —Ñ–∞–π–ª
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ TaskQueue UI
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ**
